name: Convertir CSV a JSON

on:
  workflow_dispatch:  # Permite ejecuci칩n manual desde GitHub

jobs:
  convertir_csv_a_json:
    runs-on: ubuntu-latest

    steps:
    - name: 游닌 Clonar el repositorio
      uses: actions/checkout@v3

    - name: 游냀 Configurar Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'

    - name: 游닍 Instalar dependencias
      run: |
        pip install pandas

    - name: 游 Ejecutar script de conversi칩n
      run: |
        python csv_to_json.py

    - name: 游 Verificar archivos generados
      run: |
        echo "Archivos JSON generados:"
        ls -l datos_json/

    - name: 游 Subir cambios al repositorio
      run: |
        git config user.name "github-actions[bot]"
        git config user.email "github-actions[bot]@users.noreply.github.com"
        git add datos_json/*.json
        git commit -m "Generar archivos JSON desde CSV autom치ticamente"
        git push
      env:
        GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
